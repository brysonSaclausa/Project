{"ast":null,"code":"var _jsxFileName = \"/Users/sidorelakollcaku/Desktop/PROJECT1/src/Pages/UserSide/GoalsStatus/StatusDetailPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useHistory, useParams } from 'react-router';\nimport { useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport MenuAppBar from '../../../Layout/Navbar';\nimport firebase from '../../../Config/FirebaseConfig';\nimport SmsIcon from '@material-ui/icons/Sms';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst StatusDetailPage = () => {\n  _s();\n\n  const db = firebase.database();\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [goalDetail, setGoalDetail] = useState([]);\n  const [setShowPopup] = useState(false);\n  const selector = useSelector(state => {\n    return state;\n  }); // console.log(selector)\n\n  useEffect(() => {\n    const filterSelectedGoal = selector.userReducer.selectedGoals.filter(val => val.myGoalId === id);\n    setGoalDetail(filterSelectedGoal);\n  }, []);\n\n  const handleWithDraw = event => {\n    // if (!filterFormSelectedGoal.length) {\n    let balance = '';\n    db.ref(`organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}`).on('value', snapshot => {\n      let userData = snapshot.val();\n      let userBalancedb = userData.balance;\n      balance = userBalancedb; // console.log('user',userBalancedb)\n      // setUserBalance(userBalancedb);\n    }); // console.log(balance);\n\n    if (selector.goalReducer.currentUser.orgId !== '') {\n      db.ref(`organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}`).update({\n        balance: balance + Number(event.reward)\n      });\n      db.ref(`organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`).update({\n        pending: false\n      }).then(() => {\n        console.log('selected');\n        setShowPopup(true);\n        history.push('/verify-goals');\n      }).catch(err => {\n        console.log(err);\n        alert('connection failed please try again');\n      });\n    } //    set goal if user not enrolled in any org\n    else {\n      db.ref(`organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}`).update({\n        balance: Number(balance) + Number(event.reward)\n      });\n      db.ref(`withoutOrganization/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`).update({\n        pending: true\n      }).then(() => {\n        console.log('selected');\n        history.push('/verify-goals');\n        setShowPopup(true);\n      }).catch(err => {\n        console.log(err);\n        alert('connection failed please try again');\n      });\n    }\n  };\n\n  const handleRetryGoal = event => {\n    // console.log(event)\n    if (selector.goalReducer.currentUser.orgId !== '') {\n      db.ref(`organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`).update({\n        decline: false,\n        submit: false\n      }).then(() => {\n        console.log('retry');\n        history.push('/verify-goals');\n      }).catch(err => {\n        console.log(err);\n        alert('connection failed please try again');\n      });\n    } //    set goal if user not enrolled in any org\n    else {\n      db.ref(`withoutOrganization/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`).update({\n        decline: false,\n        submit: false\n      }).then(() => {\n        history.push('/verify-goals');\n        console.log('retry');\n      }).catch(err => {\n        console.log(err);\n        alert('connection failed please try again');\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"userGoalDetail_container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userGoalDetail_md\",\n      children: [/*#__PURE__*/_jsxDEV(MenuAppBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobViewHead\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mobViewHeadContent\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"TRYVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"headChatIcon\",\n            children: /*#__PURE__*/_jsxDEV(SmsIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userGoal_detail_d\",\n        children: goalDetail && goalDetail.map(val => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userGoalDetail_content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detailLeftContent\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/goals-status\",\n              className: \"back_link\",\n              children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: val.url,\n              alt: \"...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this), val.percentage !== '100' && val.pending ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"start_goal_btn\",\n                onClick: () => handleWithDraw(val),\n                children: \"withdraw\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 23\n              }, this)\n            }, void 0, false) : null, val.decline || val.pending ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"start_goal_btn\",\n                onClick: () => handleRetryGoal(val),\n                children: \"Retry\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 23\n              }, this)\n            }, void 0, false) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detailRight_content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail_list\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"detailGoal_ul\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"goal_name_dp\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"db_red_head\",\n                    children: \"Goal:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"detail_db\",\n                    children: val.inputValues.eventName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Total Time:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"detail_db\",\n                    children: val.inputValues.numberOfDays\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Category:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"detail_db\",\n                    children: val.inputValues.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Start date:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"\",\n                    children: val.inputValues.startDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"End date:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"\",\n                    children: val.inputValues.endDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Reward Max:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"\",\n                    children: val.inputValues.rewardMax\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Reward Min:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"\",\n                    children: val.inputValues.rewardMin\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Difficulty:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"detail_db\",\n                    children: val.inputValues.dificulty\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Invest Max:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"\",\n                    children: val.inputValues.investMax\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"goal_diff_dp\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Invest Min:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"detail_db\",\n                    children: val.inputValues.investMin\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"mob_desc_dp\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"db_red_head\",\n                    children: \"Description:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"detail_db\",\n                    children: val.inputValues.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"goalMob_btn\",\n              children: val.percentage !== '100' && !val.decline ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"start_goal_btn\",\n                  onClick: () => handleWithDraw(val),\n                  children: \"withdraw\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"start_goal_btn\",\n                  onClick: () => handleRetryGoal(val),\n                  children: \"Retry\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 17\n          }, this)]\n        }, val.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StatusDetailPage, \"RvRfh03RaEvsQiv+RPFtaYNZSb0=\", false, function () {\n  return [useParams, useHistory, useSelector];\n});\n\n_c = StatusDetailPage;\nexport default StatusDetailPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"StatusDetailPage\");","map":{"version":3,"sources":["/Users/sidorelakollcaku/Desktop/PROJECT1/src/Pages/UserSide/GoalsStatus/StatusDetailPage.jsx"],"names":["React","useHistory","useParams","useSelector","useEffect","useState","MenuAppBar","firebase","SmsIcon","ArrowBackIcon","Link","StatusDetailPage","db","database","id","history","goalDetail","setGoalDetail","setShowPopup","selector","state","filterSelectedGoal","userReducer","selectedGoals","filter","val","myGoalId","handleWithDraw","event","balance","ref","goalReducer","currentUser","orgId","currentUserOrgId","on","snapshot","userData","userBalancedb","update","Number","reward","pending","then","console","log","push","catch","err","alert","handleRetryGoal","decline","submit","map","url","percentage","inputValues","eventName","numberOfDays","category","startDate","endDate","rewardMax","rewardMin","dificulty","investMax","investMin","description"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useHistory, useParams } from 'react-router'\nimport { useSelector } from 'react-redux'\nimport { useEffect } from 'react'\nimport { useState } from 'react'\nimport MenuAppBar from '../../../Layout/Navbar'\nimport firebase from '../../../Config/FirebaseConfig'\nimport SmsIcon from '@material-ui/icons/Sms'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport { Link } from 'react-router-dom'\n\nconst StatusDetailPage = () => {\n  const db = firebase.database()\n  const { id } = useParams()\n  const history = useHistory()\n  const [goalDetail, setGoalDetail] = useState([])\n  const [ setShowPopup] = useState(false)\n  const selector = useSelector((state) => {\n    return state\n  })\n  // console.log(selector)\n  useEffect(() => {\n    const filterSelectedGoal = selector.userReducer.selectedGoals.filter(\n      (val) => val.myGoalId === id,\n    )\n    setGoalDetail(filterSelectedGoal)\n  }, [])\n\n  const handleWithDraw = (event) => {\n    // if (!filterFormSelectedGoal.length) {\n    let balance = ''\n    db.ref(\n      `organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}`,\n    ).on('value', (snapshot) => {\n      let userData = snapshot.val()\n      let userBalancedb = userData.balance\n      balance = userBalancedb\n      // console.log('user',userBalancedb)\n      // setUserBalance(userBalancedb);\n    })\n    // console.log(balance);\n\n    if (selector.goalReducer.currentUser.orgId !== '') {\n      db.ref(\n        `organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}`,\n      ).update({\n        balance: balance + Number(event.reward),\n      })\n\n      db.ref(\n        `organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`,\n      )\n        .update({\n          pending: false,\n        })\n        .then(() => {\n          console.log('selected')\n          setShowPopup(true)\n          history.push('/verify-goals')\n        })\n        .catch((err) => {\n          console.log(err)\n          alert('connection failed please try again')\n        })\n    }\n    //    set goal if user not enrolled in any org\n    else {\n      db.ref(\n        `organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}`,\n      ).update({\n        balance: Number(balance) + Number(event.reward),\n      })\n      db.ref(\n        `withoutOrganization/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`,\n      )\n        .update({\n          pending: true,\n        })\n        .then(() => {\n          console.log('selected')\n          history.push('/verify-goals')\n          setShowPopup(true)\n        })\n        .catch((err) => {\n          console.log(err)\n          alert('connection failed please try again')\n        })\n    }\n  }\n\n  const handleRetryGoal = (event) => {\n    // console.log(event)\n    if (selector.goalReducer.currentUser.orgId !== '') {\n      db.ref(\n        `organizations/${selector.goalReducer.currentUser.orgId}/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`,\n      )\n        .update({\n          decline: false,\n          submit: false,\n        })\n        .then(() => {\n          console.log('retry')\n          history.push('/verify-goals')\n        })\n        .catch((err) => {\n          console.log(err)\n          alert('connection failed please try again')\n        })\n    }\n    //    set goal if user not enrolled in any org\n    else {\n      db.ref(\n        `withoutOrganization/users/${selector.userReducer.currentUserOrgId}/myGoals/${event.myGoalId}`,\n      )\n        .update({\n          decline: false,\n          submit: false,\n        })\n        .then(() => {\n          history.push('/verify-goals')\n          console.log('retry')\n        })\n        .catch((err) => {\n          console.log(err)\n          alert('connection failed please try again')\n        })\n    }\n  }\n\n  return (\n    <div className=\"userGoalDetail_container\">\n      <div className=\"userGoalDetail_md\">\n        <MenuAppBar />\n        <div className=\"mobViewHead\">\n          <div className=\"mobViewHeadContent\">\n            <h2>TRYVE</h2>\n            <div className=\"headChatIcon\">\n              <SmsIcon />\n            </div>\n          </div>\n        </div>\n        <div className=\"userGoal_detail_d\">\n          {goalDetail &&\n            goalDetail.map((val) => (\n              <div className=\"userGoalDetail_content\" key={val.id}>\n                <div className=\"detailLeftContent\">\n                  <Link to=\"/goals-status\" className=\"back_link\">\n                    <ArrowBackIcon />\n                  </Link>\n\n                  <img src={val.url} alt=\"...\" />\n                  {val.percentage !== '100' && val.pending ? (\n                    <>\n                      <button\n                        className=\"start_goal_btn\"\n                        onClick={() => handleWithDraw(val)}\n                      >\n                        withdraw\n                      </button>\n                    </>\n                  ) : null}\n                  {val.decline || val.pending ? (\n                    <>\n                      <button\n                        className=\"start_goal_btn\"\n                        onClick={() => handleRetryGoal(val)}\n                      >\n                        Retry\n                      </button>\n                    </>\n                  ) : null}\n                </div>\n                <div className=\"detailRight_content\">\n                  <div className=\"detail_list\">\n                    <ul className=\"detailGoal_ul\">\n                      <li className=\"goal_name_dp\">\n                        <h5 className=\"db_red_head\">Goal:</h5>\n                        <p className=\"detail_db\">{val.inputValues.eventName}</p>\n                      </li>\n                      <li>\n                        <p>Total Time:</p>\n                        <p className=\"detail_db\">\n                          {val.inputValues.numberOfDays}\n                        </p>\n                      </li>\n                      <li>\n                        <p>Category:</p>\n                        <p className=\"detail_db\">{val.inputValues.category}</p>\n                      </li>\n                      <li className=\"\">\n                        <p>Start date:</p>\n                        <p className=\"\">{val.inputValues.startDate}</p>\n                      </li>\n                      <li className=\"\">\n                        <p>End date:</p>\n                        <p className=\"\">{val.inputValues.endDate}</p>\n                      </li>\n                      <li className=\"\">\n                        <p>Reward Max:</p>\n                        <p className=\"\">{val.inputValues.rewardMax}</p>\n                      </li>\n                      <li className=\"\">\n                        <p>Reward Min:</p>\n                        <p className=\"\">{val.inputValues.rewardMin}</p>\n                      </li>\n                      <li className=\"\">\n                        <p>Difficulty:</p>\n                        <p className=\"detail_db\">{val.inputValues.dificulty}</p>\n                      </li>\n                      <li className=\"\">\n                        <p>Invest Max:</p>\n                        <p className=\"\">{val.inputValues.investMax}</p>\n                      </li>\n                      <li className=\"goal_diff_dp\">\n                        <p>Invest Min:</p>\n                        <p className=\"detail_db\">{val.inputValues.investMin}</p>\n                      </li>\n                      <li className=\"mob_desc_dp\">\n                        <h5 className=\"db_red_head\">Description:</h5>\n                        <p className=\"detail_db\">\n                          {val.inputValues.description}\n                        </p>\n                      </li>\n                    </ul>\n                  </div>\n                  <div className=\"goalMob_btn\">\n                    {val.percentage !== '100' && !val.decline ? (\n                      <>\n                        <button\n                          className=\"start_goal_btn\"\n                          onClick={() => handleWithDraw(val)}\n                        >\n                          withdraw\n                        </button>\n                        <button\n                          className=\"start_goal_btn\"\n                          onClick={() => handleRetryGoal(val)}\n                        >\n                          Retry\n                        </button>\n                      </>\n                    ) : null}\n                  </div>\n                </div>\n              </div>\n            ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default StatusDetailPage\n"]},"metadata":{},"sourceType":"module"}