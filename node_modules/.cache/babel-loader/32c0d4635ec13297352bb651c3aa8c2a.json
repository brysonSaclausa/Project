{"ast":null,"code":"var _jsxFileName = \"/Users/sidorelakollcaku/Desktop/Project/src/Pages/DashboardScreens/WithOutOrganizations/CreateGoals/Index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport MiniDrawer from \"../../Sidebar\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport CreateGoals from \"../../WithOrganizations/CreateGoals/CreateGoals\";\nimport firebase from \"../../../../Config/FirebaseConfig\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst goalsInput = {\n  eventName: \"\",\n  description: \"\",\n  dificulty: \"\",\n  endDate: \"\",\n  investMin: \"\",\n  investMax: \"\",\n  rewardMin: \"\",\n  rewardMax: \"\",\n  startDate: \"\",\n  category: \"\",\n  numberOfDays: ''\n};\n\nconst WithOutOrgGoalsCreate = () => {\n  _s();\n\n  const history = useHistory();\n  const [inputValues, setInputValues] = useState(goalsInput);\n  const [imgUrl, setImgurl] = useState(\"\");\n  const [imgName, setImgName] = useState(\"\");\n  const [local, setLocal] = useState(\"\"); // loading\n\n  let [loading, setLoading] = useState(false);\n\n  const handleGoals = event => {\n    setInputValues({ ...inputValues,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleGoalImg = event => {\n    const url = URL.createObjectURL(event.target.files[0]);\n    const goalImgName = event.target.files[0].name;\n    setImgurl(url);\n    setImgName(goalImgName);\n    setLocal(event.target.files[0]);\n  }; // firebase storage ref\n\n\n  const storage = firebase.storage();\n\n  let createStorageRef = () => storage.ref(`goalsImages/${imgName}`).put(local);\n\n  let downLoad = () => storage.ref(`goalsImages/${imgName}`).getDownloadURL(); // firebase database reference\n\n\n  const db = firebase.database();\n  const goalsRef = db.ref(`withoutOrganization/goals`);\n  const pushGoal = goalsRef.push();\n  const ref = db.ref(`withoutOrganization/categories`);\n  let [dbCategory, setDbCategory] = useState([]);\n\n  const getCategories = () => {\n    ref.on(\"value\", snapshot => {\n      let categoryArray = [];\n      snapshot.forEach(data => {\n        let resData = data.val();\n        let dataKey = data.key;\n        resData.id = dataKey;\n        categoryArray.push(resData);\n      });\n      setDbCategory(categoryArray);\n    });\n  };\n\n  useEffect(() => {\n    getCategories();\n    return () => {\n      getCategories();\n    };\n  }, []); // add goals in database\n\n  const handleAddGoals = e => {\n    e.preventDefault();\n    setLoading(true);\n    createStorageRef().then(() => {\n      downLoad().then(url => {\n        pushGoal.set({\n          inputValues,\n          url,\n          peopleJoined: 0\n        }).then(() => {\n          setLoading(false);\n          history.push(`/without-organization/dashboard`);\n        }).catch(err => {\n          console.log(err);\n          setLoading(false);\n        });\n      });\n    });\n    setInputValues(goalsInput);\n    setImgurl(\"\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"createGoals_container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"createGoals_md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard_left_content\",\n          children: /*#__PURE__*/_jsxDEV(MiniDrawer, {\n            withOutOrg: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create_goals_right_content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"top_route_head\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"top_route_icon\",\n              children: /*#__PURE__*/_jsxDEV(PersonIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginLeft: \"10px\"\n              },\n              children: \"Goals\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"create_goals_box_main\",\n            children: /*#__PURE__*/_jsxDEV(CreateGoals, {\n              handleAddGoals: handleAddGoals,\n              handleInputGoals: handleGoals,\n              handleGoalImg: handleGoalImg,\n              inputValues: inputValues,\n              imgUrl: imgUrl,\n              loading: loading,\n              btnValue: \"Add goals\",\n              backArrowPathId: \"/without-organization/dashboard\",\n              dbCategory: dbCategory\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WithOutOrgGoalsCreate, \"5vIQU6UAtJzr9iqso0K1JD9gV0c=\", false, function () {\n  return [useHistory];\n});\n\n_c = WithOutOrgGoalsCreate;\nexport default WithOutOrgGoalsCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"WithOutOrgGoalsCreate\");","map":{"version":3,"sources":["/Users/sidorelakollcaku/Desktop/Project/src/Pages/DashboardScreens/WithOutOrganizations/CreateGoals/Index.jsx"],"names":["React","useState","useEffect","MiniDrawer","PersonIcon","CreateGoals","firebase","useHistory","goalsInput","eventName","description","dificulty","endDate","investMin","investMax","rewardMin","rewardMax","startDate","category","numberOfDays","WithOutOrgGoalsCreate","history","inputValues","setInputValues","imgUrl","setImgurl","imgName","setImgName","local","setLocal","loading","setLoading","handleGoals","event","target","name","value","handleGoalImg","url","URL","createObjectURL","files","goalImgName","storage","createStorageRef","ref","put","downLoad","getDownloadURL","db","database","goalsRef","pushGoal","push","dbCategory","setDbCategory","getCategories","on","snapshot","categoryArray","forEach","data","resData","val","dataKey","key","id","handleAddGoals","e","preventDefault","then","set","peopleJoined","catch","err","console","log","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MiniDrawer from \"../../Sidebar\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport CreateGoals from \"../../WithOrganizations/CreateGoals/CreateGoals\";\nimport firebase from \"../../../../Config/FirebaseConfig\";\nimport { useHistory } from \"react-router-dom\";\n\nconst goalsInput = {\n  eventName: \"\",\n  description: \"\",\n  dificulty: \"\",\n  endDate: \"\",\n  investMin: \"\",\n  investMax: \"\",\n  rewardMin: \"\",\n  rewardMax: \"\",\n  startDate: \"\",\n  category: \"\",\n  numberOfDays:''\n};\n\nconst WithOutOrgGoalsCreate = () => {\n  const history = useHistory();\n  const [inputValues, setInputValues] = useState(goalsInput);\n  const [imgUrl, setImgurl] = useState(\"\");\n  const [imgName, setImgName] = useState(\"\");\n  const [local, setLocal] = useState(\"\");\n  // loading\n  let [loading, setLoading] = useState(false);\n  const handleGoals = (event) => {\n    setInputValues({ ...inputValues, [event.target.name]: event.target.value });\n  };\n\n  const handleGoalImg = (event) => {\n    const url = URL.createObjectURL(event.target.files[0]);\n    const goalImgName = event.target.files[0].name;\n    setImgurl(url);\n    setImgName(goalImgName);\n    setLocal(event.target.files[0]);\n  };\n  // firebase storage ref\n  const storage = firebase.storage();\n  let createStorageRef = () => storage.ref(`goalsImages/${imgName}`).put(local);\n  let downLoad = () => storage.ref(`goalsImages/${imgName}`).getDownloadURL();\n\n  // firebase database reference\n  const db = firebase.database();\n  const goalsRef = db.ref(`withoutOrganization/goals`);\n  const pushGoal = goalsRef.push();\n  const ref = db.ref(`withoutOrganization/categories`);\n  let [dbCategory, setDbCategory] = useState([]);\n\n  const getCategories = () => {\n    ref.on(\"value\", (snapshot) => {\n      let categoryArray = [];\n      snapshot.forEach((data) => {\n        let resData = data.val();\n        let dataKey = data.key;\n        resData.id = dataKey;\n        categoryArray.push(resData);\n      });\n      setDbCategory(categoryArray);\n    });\n  };\n\n  useEffect(() => {\n    getCategories();\n    return () => {\n      getCategories();\n    };\n  }, []);\n\n  // add goals in database\n\n  const handleAddGoals = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    createStorageRef().then(() => {\n      downLoad().then((url) => {\n        pushGoal\n          .set({\n            inputValues,\n            url,\n            peopleJoined: 0,\n          })\n          .then(() => {\n            setLoading(false);\n            history.push(`/without-organization/dashboard`);\n          })\n          .catch((err) => {\n            console.log(err);\n            setLoading(false);\n          });\n      });\n    });\n    setInputValues(goalsInput);\n    setImgurl(\"\");\n  };\n\n  return (\n    <div>\n      <div className=\"createGoals_container\">\n        <div className=\"createGoals_md\">\n          <div className=\"dashboard_left_content\">\n            <MiniDrawer withOutOrg />\n          </div>\n          <div className=\"create_goals_right_content\">\n            <div className=\"top_route_head\">\n              <p className=\"top_route_icon\">\n                <PersonIcon />\n              </p>\n              <p style={{ marginLeft: \"10px\" }}>Goals</p>\n            </div>\n            <div className=\"create_goals_box_main\">\n              <CreateGoals\n                handleAddGoals={handleAddGoals}\n                handleInputGoals={handleGoals}\n                handleGoalImg={handleGoalImg}\n                inputValues={inputValues}\n                imgUrl={imgUrl}\n                loading={loading}\n                btnValue=\"Add goals\"\n                backArrowPathId=\"/without-organization/dashboard\"\n                dbCategory={dbCategory}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WithOutOrgGoalsCreate;\n"]},"metadata":{},"sourceType":"module"}