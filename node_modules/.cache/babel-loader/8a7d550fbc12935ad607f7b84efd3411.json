{"ast":null,"code":"var _jsxFileName = \"/Users/sidorelakollcaku/Desktop/PROJECT1/src/Pages/DashboardScreens/WithOrganizations/CreateGoals/Index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport MiniDrawer from \"../../Sidebar\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport CreateGoals from \"./CreateGoals\";\nimport firebase from \"../../../../Config/FirebaseConfig\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst goalsInput = {\n  eventName: \"\",\n  description: \"\",\n  dificulty: \"\",\n  endDate: \"\",\n  investMin: \"\",\n  investMax: \"\",\n  rewardMin: \"\",\n  rewardMax: \"\",\n  startDate: \"\",\n  category: \"\",\n  numberOfDays: ''\n};\n\nconst Index = () => {\n  _s();\n\n  const {\n    id\n  } = useParams(); // console.log(id)\n\n  const history = useHistory();\n  const [inputValues, setInputValues] = useState(goalsInput);\n  const [imgUrl, setImgurl] = useState(\"\");\n  const [imgName, setImgName] = useState(\"\");\n  const [local, setLocal] = useState(\"\"); // loading\n\n  let [loading, setLoading] = useState(false);\n\n  const handleGoals = event => {\n    setInputValues({ ...inputValues,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleGoalImg = event => {\n    const url = URL.createObjectURL(event.target.files[0]);\n    const goalImgName = event.target.files[0].name;\n    setImgurl(url);\n    setImgName(goalImgName);\n    setLocal(event.target.files[0]);\n  }; // firebase storage ref\n\n\n  const storage = firebase.storage();\n\n  let createStorageRef = () => storage.ref(`goalsImages/${imgName}`).put(local);\n\n  let downLoad = () => storage.ref(`goalsImages/${imgName}`).getDownloadURL(); // firebase database reference\n\n\n  const db = firebase.database();\n  const goalsRef = db.ref(`organizations/${id}/goals`);\n  const pushGoal = goalsRef.push();\n  const ref = db.ref(`organizations/${id}/categories`);\n  let [dbCategory, setDbCategory] = useState([]);\n\n  const getCategories = () => {\n    ref.on(\"value\", snapshot => {\n      let categoryArray = [];\n      snapshot.forEach(data => {\n        let resData = data.val();\n        let dataKey = data.key;\n        resData.id = dataKey;\n        categoryArray.push(resData);\n      });\n      setDbCategory(categoryArray);\n    });\n  };\n\n  useEffect(() => {\n    getCategories();\n    return () => {\n      getCategories();\n    };\n  }, []); // add goals in database\n\n  const handleAddGoals = e => {\n    e.preventDefault();\n    setLoading(true);\n    createStorageRef().then(() => {\n      downLoad().then(url => {\n        pushGoal.set({\n          inputValues,\n          // numberOfDays,\n          url,\n          peopleJoined: 0,\n          used: false\n        }).then(() => {\n          setLoading(false);\n          history.push(`/organizations/${id}/dashboard`);\n        }).catch(err => {\n          console.log(err);\n          setLoading(false);\n        });\n      });\n    }); // console.log(inputValues);\n\n    setInputValues(goalsInput);\n    setImgurl(\"\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"createGoals_container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"createGoals_md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard_left_content\",\n          children: /*#__PURE__*/_jsxDEV(MiniDrawer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create_goals_right_content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"top_route_head\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"top_route_icon\",\n              children: /*#__PURE__*/_jsxDEV(PersonIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginLeft: \"10px\"\n              },\n              children: \"Goals\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"create_goals_box_main\",\n            children: /*#__PURE__*/_jsxDEV(CreateGoals, {\n              handleAddGoals: handleAddGoals,\n              handleInputGoals: handleGoals,\n              handleGoalImg: handleGoalImg,\n              inputValues: inputValues,\n              imgUrl: imgUrl,\n              loading: loading,\n              btnValue: \"Add goals\",\n              dbCategory: dbCategory,\n              backArrowPathId: `/organizations/${id}/dashboard`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Index, \"aKHV133+794PTA7WjBjaPlDBS0U=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/Users/sidorelakollcaku/Desktop/PROJECT1/src/Pages/DashboardScreens/WithOrganizations/CreateGoals/Index.jsx"],"names":["React","useState","useEffect","MiniDrawer","PersonIcon","CreateGoals","firebase","useHistory","useParams","goalsInput","eventName","description","dificulty","endDate","investMin","investMax","rewardMin","rewardMax","startDate","category","numberOfDays","Index","id","history","inputValues","setInputValues","imgUrl","setImgurl","imgName","setImgName","local","setLocal","loading","setLoading","handleGoals","event","target","name","value","handleGoalImg","url","URL","createObjectURL","files","goalImgName","storage","createStorageRef","ref","put","downLoad","getDownloadURL","db","database","goalsRef","pushGoal","push","dbCategory","setDbCategory","getCategories","on","snapshot","categoryArray","forEach","data","resData","val","dataKey","key","handleAddGoals","e","preventDefault","then","set","peopleJoined","used","catch","err","console","log","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from \"react\";\nimport MiniDrawer from \"../../Sidebar\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport CreateGoals from \"./CreateGoals\";\nimport firebase from \"../../../../Config/FirebaseConfig\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst goalsInput = {\n  eventName: \"\",\n  description: \"\",\n  dificulty: \"\",\n  endDate: \"\",\n  investMin: \"\",\n  investMax: \"\",\n  rewardMin: \"\",\n  rewardMax: \"\",\n  startDate: \"\",\n  category: \"\",\n  numberOfDays:''\n};\n\nconst Index = () => {\n  const { id } = useParams();\n  // console.log(id)\n  const history = useHistory();\n  const [inputValues, setInputValues] = useState(goalsInput);\n  const [imgUrl, setImgurl] = useState(\"\");\n  const [imgName, setImgName] = useState(\"\");\n  const [local, setLocal] = useState(\"\");\n  // loading\n  let [loading, setLoading] = useState(false);\n  const handleGoals = (event) => {\n    setInputValues({ ...inputValues, [event.target.name]: event.target.value });\n  };\n\n  const handleGoalImg = (event) => {\n    const url = URL.createObjectURL(event.target.files[0]);\n    const goalImgName = event.target.files[0].name;\n    setImgurl(url);\n    setImgName(goalImgName);\n    setLocal(event.target.files[0]);\n  };\n  // firebase storage ref\n  const storage = firebase.storage();\n  let createStorageRef = () => storage.ref(`goalsImages/${imgName}`).put(local);\n  let downLoad = () => storage.ref(`goalsImages/${imgName}`).getDownloadURL();\n\n  // firebase database reference\n  const db = firebase.database();\n  const goalsRef = db.ref(`organizations/${id}/goals`);\n  const pushGoal = goalsRef.push();\n  const ref = db.ref(`organizations/${id}/categories`);\n  let [dbCategory, setDbCategory] = useState([]);\n\n  const getCategories= ()=>{\n    ref.on(\"value\", (snapshot) => {\n      let categoryArray = [];\n      snapshot.forEach((data) => {\n        let resData = data.val();\n        let dataKey = data.key;\n        resData.id = dataKey;\n        categoryArray.push(resData);\n      });\n      setDbCategory(categoryArray);\n    });\n  }\n\n  useEffect(()=>{\n    getCategories()\n    return ()=>{\n    getCategories()\n\n    }\n  },[])\n\n  // add goals in database\n\n  const handleAddGoals = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    createStorageRef().then(() => {\n      downLoad().then((url) => {\n        pushGoal\n          .set({\n            inputValues,\n            // numberOfDays,\n            url,\n            peopleJoined: 0,\n            used:false\n          })\n          .then(() => {\n            setLoading(false);\n            history.push(`/organizations/${id}/dashboard`);\n          })\n          .catch((err) => {\n            console.log(err);\n            setLoading(false);\n          });\n      });\n    });\n    // console.log(inputValues);\n    setInputValues(goalsInput);\n    setImgurl(\"\");\n  };\n\n  return (\n    <div>\n      <div className=\"createGoals_container\">\n        <div className=\"createGoals_md\">\n          <div className=\"dashboard_left_content\">\n            <MiniDrawer />\n          </div>\n          <div className=\"create_goals_right_content\">\n            <div className=\"top_route_head\">\n              <p className=\"top_route_icon\">\n                <PersonIcon />\n              </p>\n              <p style={{ marginLeft: \"10px\" }}>Goals</p>\n            </div>\n            <div className=\"create_goals_box_main\">\n              <CreateGoals\n                handleAddGoals={handleAddGoals}\n                handleInputGoals={handleGoals}\n                handleGoalImg={handleGoalImg}\n                inputValues={inputValues}\n                imgUrl={imgUrl}\n                loading={loading}\n                btnValue=\"Add goals\"\n                dbCategory={dbCategory}\n                backArrowPathId={`/organizations/${id}/dashboard`}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}