{"ast":null,"code":"var _jsxFileName = \"/Users/sidorelakollcaku/Desktop/PROJECT1/src/Pages/UserSide/Feed/UsersGoals.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport ThumbUpAltOutlinedIcon from '@material-ui/icons/ThumbUpAltOutlined';\nimport firebase from '../../../Config/FirebaseConfig';\nimport SendIcon from '@material-ui/icons/Send';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport { send } from 'emailjs-com';\nimport AlertDialog from '../../../Components/AlertPopup';\nimport dp from '../../../Assets/dp.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UsersGoals = () => {\n  _s();\n\n  const db = firebase.database();\n  const selector = useSelector(state => {\n    return state;\n  });\n  const {\n    goalReducer,\n    userReducer\n  } = selector; // like post\n\n  const handleLikePost = (event, likeEvent) => {\n    const checkIsPostLike = userReducer.postLikes.filter(posts => posts.goalId === event.orgMainId && posts.uid === goalReducer.currentUser.id); // console.log(event)\n    // if user enrolled in org\n\n    if (goalReducer.currentUser.orgId !== '') {\n      if (checkIsPostLike.length) {\n        db.ref(`organizations/${goalReducer.currentUser.orgId}/likes/${event.orgMainId}/${likeEvent.likeId}`).update({\n          isLike: true\n        }); // likes increament\n\n        db.ref(`organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`).update({\n          likes: event.likes ? event.likes + 1 : 1\n        });\n      } else {\n        db.ref(`organizations/${goalReducer.currentUser.orgId}/likes/${event.orgMainId}`).push().set({\n          uid: goalReducer.currentUser.id,\n          isLike: true,\n          goalId: event.orgMainId\n        });\n        db.ref(`organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`).update({\n          likes: event.likes ? event.likes + 1 : 1\n        });\n      }\n    } // if user is not enrolled in org\n    else {\n      if (checkIsPostLike.length) {\n        db.ref(`withoutOrganization/likes/${event.orgMainId}/${likeEvent.likeId}`).update({\n          isLike: true\n        }); // likes increament\n\n        db.ref(`withoutOrganization/submitGoals/${event.orgMainId}`).update({\n          likes: event.likes ? event.likes + 1 : 1\n        });\n      } else {\n        db.ref(`withoutOrganization/likes/${event.orgMainId}`).push().set({\n          uid: goalReducer.currentUser.id,\n          isLike: true,\n          goalId: event.orgMainId\n        });\n        db.ref(`organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`).update({\n          likes: event.likes ? event.likes + 1 : 1\n        });\n      }\n    }\n  }; // unlike post\n\n\n  const handleUnlikePost = (event, subEvent) => {\n    // console.log(event)\n    if (goalReducer.currentUser.orgId !== '') {\n      db.ref(`organizations/${goalReducer.currentUser.orgId}/likes/${event.goalId}/${event.likeId}`).update({\n        isLike: false\n      }); // decreament like\n\n      db.ref(`organizations/${goalReducer.currentUser.orgId}/submitGoals/${subEvent.orgMainId}`).update({\n        likes: subEvent.likes - 1\n      });\n    } else {\n      db.ref(`withoutOrganization/likes/${event.goalId}/${event.likeId}`).update({\n        isLike: false\n      });\n      db.ref(`withoutOrganization/submitGoals/${subEvent.orgMainId}`).update({\n        likes: subEvent.likes - 1\n      });\n    }\n  }; // post report\n\n\n  let [loading, setLoading] = useState(false);\n  let [reportSuccesPopup, setReportSuccesPopup] = useState(false);\n  let [reportGoalId, setReportGoalId] = useState('');\n\n  const handleReportPost = event => {\n    setReportGoalId(event.orgMainId);\n    setLoading(true);\n    const reportedUserName = goalReducer.currentUser.name; // console.log(reportedUserName, event)\n    // const filterUserEmailToSendNotification =\n\n    userReducer.allUsers.filter(user => {\n      if (user.id === event.userIdMain) {\n        // console.log(user)\n        send( // process.env.REACT_APP_EMAIL_JS_SERVICE_ID,\n        // process.env.REACT_APP_EMAIL_JS_TEMPLATE_ID,\n        'service_q1galup', 'template_aq5fbiv', {\n          to: `${user.email}`,\n          to_name: `${event.userName}`,\n          from_email_name: 'TRYVE',\n          subject: '',\n          message: `${reportedUserName} reported your goal please retake good picture. Thanks!`,\n          from: 'ansariwaqas310@gmail.com',\n          reply_to: 'tryve@gmail.com'\n        }, process.env.REACT_APP_EMAIL_JS_USER_ID).then(() => {\n          console.log('success...');\n        }).catch(err => {\n          console.log('admin Email sending FAILED...', err);\n        });\n      }\n    });\n\n    if (goalReducer.currentUser.orgId !== '') {\n      db.ref(`organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`).update({\n        isReport: true,\n        acceptReport: false\n      }).then(() => {\n        setLoading(false);\n        setReportSuccesPopup(true);\n      });\n    } else {\n      db.ref(`withoutOrganization/submitGoals/${event.orgMainId}`).update({\n        isReport: true,\n        acceptReport: false\n      }).then(() => {\n        setLoading(false);\n        setReportSuccesPopup(true);\n      });\n    }\n  }; // show comment section\n\n\n  let [showComment, setShowComment] = React.useState(false);\n  let [comment, setComment] = React.useState('');\n  let [postId, setPostId] = React.useState('');\n  let [commentLoad, setCommentLoad] = React.useState(false);\n  const bottomRef = useRef(null); // show comment section function\n\n  const handleCommentShow = event => {\n    setShowComment(!showComment);\n\n    if (event.orgMainId === postId) {\n      setPostId('');\n    } else {\n      setPostId(event.orgMainId);\n    }\n  }; // set comment input value\n\n\n  const handleComment = event => {\n    setComment(event.target.value);\n  }; // set comment in database\n\n\n  const handleAddComment = event => {\n    setCommentLoad(true);\n    console.log(event, goalReducer.currentUser);\n\n    if (comment.length > 0) {\n      if (goalReducer.currentUser.orgId !== '') {\n        db.ref(`organizations/${goalReducer.currentUser.orgId}/comments/${event.orgMainId}`).push().set({\n          uid: goalReducer.currentUser.id,\n          userName: goalReducer.currentUser.name,\n          userImg: goalReducer.currentUser.url ? goalReducer.currentUser.url : '',\n          comment: comment,\n          goalId: event.orgMainId\n        });\n        setComment('');\n        setCommentLoad(false);\n      } else {\n        db.ref(`withoutOrganization/comments/${event.orgMainId}`).push().set({\n          uid: goalReducer.currentUser.id,\n          userName: goalReducer.currentUser.name,\n          userImg: goalReducer.currentUser.url ? goalReducer.currentUser.url : '',\n          comment: comment,\n          goalId: event.orgMainId\n        });\n        setComment('');\n        setCommentLoad(false);\n      }\n    } // else {\n    //   alert('please enter comment')\n    // }\n\n  };\n\n  const scrollToBottom = () => {\n    if (postId || commentLoad) {// bottomRef.current.scrollIntoView({ behavior: 'smooth' })\n    }\n  };\n\n  React.useEffect(scrollToBottom, [postId, commentLoad, handleAddComment]); // delete comment\n\n  const handleDeleteComment = event => {\n    if (goalReducer.currentUser.orgId !== '') {\n      db.ref(`organizations/${goalReducer.currentUser.orgId}/comments/${event.goalId}/${event.commentId}`).remove();\n    }\n  };\n\n  const handleClosePopup = () => {\n    setReportSuccesPopup(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"feedGoalsContainer\",\n    children: [reportSuccesPopup ? /*#__PURE__*/_jsxDEV(AlertDialog, {\n      handleClose: handleClosePopup,\n      open: reportSuccesPopup,\n      value: \"Reported Successfull\",\n      btnValue: \"OK\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feedGoalsContent\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedGoals \",\n        children: userReducer.feedGoals.length ? userReducer.feedGoals.map((val, i) => {\n          // console.log(val)\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: i % 2 !== 0 ? 'horizontal feedGoalGrid' : 'vertical feedGoalGrid',\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"imgLikeBtn\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"feedGoalImg\",\n                src: val.uploadImgUlr,\n                alt: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this), userReducer.postLikes.map((like, j) => {\n                return like.goalId === val.orgMainId && like.uid === goalReducer.currentUser.id ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"likeBtn likeZ\",\n                  onClick: !like.isLike ? () => handleLikePost(val, like) : () => handleUnlikePost(like, val),\n                  children: /*#__PURE__*/_jsxDEV(ThumbUpAltOutlinedIcon, {\n                    className: like.isLike ? 'liked' : 'unlike'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 27\n                  }, this)\n                }, j, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 25\n                }, this) : null;\n              }), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"likeBtn\",\n                onClick: () => handleLikePost(val, false),\n                children: /*#__PURE__*/_jsxDEV(ThumbUpAltOutlinedIcon, {\n                  className: 'unlike'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cmntAndReportBtn\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"noOfLikes\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: val.likes ? val.likes + ' Likes' : '0 Likes'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleCommentShow(val),\n                className: \"cmntBtn\",\n                children: \"Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: val.userIdMain === goalReducer.currentUser.id ? 'disabled reportBtn' : \"reportBtn\",\n                onClick: () => handleReportPost(val),\n                disabled: loading || val.userIdMain === goalReducer.currentUser.id,\n                children: loading && reportGoalId === val.orgMainId ? 'loading...' : 'Report'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), val.orgMainId === postId ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"commentSection\",\n              children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"commmentList\",\n                children: userReducer.comments.length ? userReducer.comments.map((commentval, k) => {\n                  return commentval.goalId === val.orgMainId ? /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: commentval.userImg ? commentval.userImg : dp,\n                      alt: \"...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"comments\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"cmntLines\",\n                        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                          children: commentval.userName\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 343,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: commentval.comment\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 344,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 342,\n                        columnNumber: 35\n                      }, this), commentval.uid === goalReducer.currentUser.id ? /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"dltBtn\",\n                        onClick: () => handleDeleteComment(commentval),\n                        children: /*#__PURE__*/_jsxDEV(DeleteForeverIcon, {\n                          className: \"dltIcon\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 354,\n                          columnNumber: 39\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 348,\n                        columnNumber: 37\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"strtBtm\",\n                      ref: bottomRef\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 358,\n                      columnNumber: 35\n                    }, this)]\n                  }, k, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 31\n                  }, this) : null;\n                }) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"There is no comment!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"commentInput\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"comment\",\n                  id: \"comment\",\n                  placeholder: \"Comment\",\n                  onChange: handleComment,\n                  value: comment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleAddComment(val),\n                  children: /*#__PURE__*/_jsxDEV(SendIcon, {\n                    className: \"sentIcon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 21\n            }, this) : null]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 17\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"list is empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UsersGoals, \"w4E+qfXI6PHiY9qBbtjB118qrQs=\", false, function () {\n  return [useSelector];\n});\n\n_c = UsersGoals;\nexport default UsersGoals;\n\nvar _c;\n\n$RefreshReg$(_c, \"UsersGoals\");","map":{"version":3,"sources":["/Users/sidorelakollcaku/Desktop/PROJECT1/src/Pages/UserSide/Feed/UsersGoals.jsx"],"names":["React","useRef","useState","useSelector","ThumbUpAltOutlinedIcon","firebase","SendIcon","DeleteForeverIcon","send","AlertDialog","dp","UsersGoals","db","database","selector","state","goalReducer","userReducer","handleLikePost","event","likeEvent","checkIsPostLike","postLikes","filter","posts","goalId","orgMainId","uid","currentUser","id","orgId","length","ref","likeId","update","isLike","likes","push","set","handleUnlikePost","subEvent","loading","setLoading","reportSuccesPopup","setReportSuccesPopup","reportGoalId","setReportGoalId","handleReportPost","reportedUserName","name","allUsers","user","userIdMain","to","email","to_name","userName","from_email_name","subject","message","from","reply_to","process","env","REACT_APP_EMAIL_JS_USER_ID","then","console","log","catch","err","isReport","acceptReport","showComment","setShowComment","comment","setComment","postId","setPostId","commentLoad","setCommentLoad","bottomRef","handleCommentShow","handleComment","target","value","handleAddComment","userImg","url","scrollToBottom","useEffect","handleDeleteComment","commentId","remove","handleClosePopup","feedGoals","map","val","i","uploadImgUlr","like","j","comments","commentval","k"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport ThumbUpAltOutlinedIcon from '@material-ui/icons/ThumbUpAltOutlined'\nimport firebase from '../../../Config/FirebaseConfig'\nimport SendIcon from '@material-ui/icons/Send'\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever'\nimport { send } from 'emailjs-com'\nimport AlertDialog from '../../../Components/AlertPopup'\nimport dp from '../../../Assets/dp.png'\n\nconst UsersGoals = () => {\n  const db = firebase.database()\n\n  const selector = useSelector((state) => {\n    return state\n  })\n  const { goalReducer, userReducer } = selector\n  // like post\n  const handleLikePost = (event, likeEvent) => {\n    const checkIsPostLike = userReducer.postLikes.filter(\n      (posts) =>\n        posts.goalId === event.orgMainId &&\n        posts.uid === goalReducer.currentUser.id,\n    )\n    // console.log(event)\n    // if user enrolled in org\n    if (goalReducer.currentUser.orgId !== '') {\n      if (checkIsPostLike.length) {\n        db.ref(\n          `organizations/${goalReducer.currentUser.orgId}/likes/${event.orgMainId}/${likeEvent.likeId}`,\n        ).update({\n          isLike: true,\n        })\n        // likes increament\n        db.ref(\n          `organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`,\n        ).update({\n          likes: event.likes ? event.likes + 1 : 1,\n        })\n      } else {\n        db.ref(\n          `organizations/${goalReducer.currentUser.orgId}/likes/${event.orgMainId}`,\n        )\n          .push()\n          .set({\n            uid: goalReducer.currentUser.id,\n            isLike: true,\n            goalId: event.orgMainId,\n          })\n        db.ref(\n          `organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`,\n        ).update({\n          likes: event.likes ? event.likes + 1 : 1,\n        })\n      }\n    }\n    // if user is not enrolled in org\n    else {\n      if (checkIsPostLike.length) {\n        db.ref(\n          `withoutOrganization/likes/${event.orgMainId}/${likeEvent.likeId}`,\n        ).update({\n          isLike: true,\n        })\n        // likes increament\n        db.ref(`withoutOrganization/submitGoals/${event.orgMainId}`).update({\n          likes: event.likes ? event.likes + 1 : 1,\n        })\n      } else {\n        db.ref(`withoutOrganization/likes/${event.orgMainId}`).push().set({\n          uid: goalReducer.currentUser.id,\n          isLike: true,\n          goalId: event.orgMainId,\n        })\n        db.ref(\n          `organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`,\n        ).update({\n          likes: event.likes ? event.likes + 1 : 1,\n        })\n      }\n    }\n  }\n\n  // unlike post\n  const handleUnlikePost = (event, subEvent) => {\n    // console.log(event)\n    if (goalReducer.currentUser.orgId !== '') {\n      db.ref(\n        `organizations/${goalReducer.currentUser.orgId}/likes/${event.goalId}/${event.likeId}`,\n      ).update({\n        isLike: false,\n      })\n      // decreament like\n      db.ref(\n        `organizations/${goalReducer.currentUser.orgId}/submitGoals/${subEvent.orgMainId}`,\n      ).update({\n        likes: subEvent.likes - 1,\n      })\n    } else {\n      db.ref(\n        `withoutOrganization/likes/${event.goalId}/${event.likeId}`,\n      ).update({\n        isLike: false,\n      })\n      db.ref(`withoutOrganization/submitGoals/${subEvent.orgMainId}`).update({\n        likes: subEvent.likes - 1,\n      })\n    }\n  }\n\n  // post report\n  let [loading, setLoading] = useState(false)\n  let [reportSuccesPopup, setReportSuccesPopup] = useState(false)\n  let [reportGoalId,setReportGoalId] = useState('')\n  const handleReportPost = (event) => {\n    setReportGoalId(event.orgMainId)\n    setLoading(true)\n    const reportedUserName = goalReducer.currentUser.name\n    // console.log(reportedUserName, event)\n    // const filterUserEmailToSendNotification =\n    userReducer.allUsers.filter((user) => {\n      if (user.id === event.userIdMain) {\n        // console.log(user)\n        send(\n          // process.env.REACT_APP_EMAIL_JS_SERVICE_ID,\n          // process.env.REACT_APP_EMAIL_JS_TEMPLATE_ID,\n          'service_q1galup',\n          'template_aq5fbiv',\n          {\n            to: `${user.email}`,\n            to_name: `${event.userName}`,\n            from_email_name: 'TRYVE',\n            subject: '',\n            message: `${reportedUserName} reported your goal please retake good picture. Thanks!`,\n            from: 'ansariwaqas310@gmail.com',\n            reply_to: 'tryve@gmail.com',\n          },\n          process.env.REACT_APP_EMAIL_JS_USER_ID,\n        )\n          .then(() => {\n            console.log('success...')\n          })\n          .catch((err) => {\n            console.log('admin Email sending FAILED...', err)\n          })\n      }\n    })\n    if (goalReducer.currentUser.orgId !== '') {\n      db.ref(\n        `organizations/${goalReducer.currentUser.orgId}/submitGoals/${event.orgMainId}`,\n      )\n        .update({ isReport: true, acceptReport: false })\n        .then(() => {\n          setLoading(false)\n          setReportSuccesPopup(true)\n        })\n    } else {\n      db.ref(`withoutOrganization/submitGoals/${event.orgMainId}`)\n        .update({\n          isReport: true,\n          acceptReport: false,\n        })\n        .then(() => {\n          setLoading(false)\n          setReportSuccesPopup(true)\n        })\n    }\n  }\n\n  // show comment section\n  let [showComment, setShowComment] = React.useState(false)\n  let [comment, setComment] = React.useState('')\n  let [postId, setPostId] = React.useState('')\n  let [commentLoad, setCommentLoad] = React.useState(false)\n  const bottomRef = useRef(null)\n  // show comment section function\n  const handleCommentShow = (event) => {\n    setShowComment(!showComment)\n    if (event.orgMainId === postId) {\n      setPostId('')\n    } else {\n      setPostId(event.orgMainId)\n    }\n  }\n  // set comment input value\n  const handleComment = (event) => {\n    setComment(event.target.value)\n  }\n  \n\n  // set comment in database\n  const handleAddComment = (event) => {\n    setCommentLoad(true)\n    console.log(event, goalReducer.currentUser)\n    if (comment.length > 0) {\n      if (goalReducer.currentUser.orgId !== '') {\n        db.ref(\n          `organizations/${goalReducer.currentUser.orgId}/comments/${event.orgMainId}`,\n        )\n          .push()\n          .set({\n            uid: goalReducer.currentUser.id,\n            userName: goalReducer.currentUser.name,\n            userImg: goalReducer.currentUser.url\n              ? goalReducer.currentUser.url\n              : '',\n            comment: comment,\n            goalId: event.orgMainId,\n          })\n        setComment('')\n        setCommentLoad(false)\n      } else {\n        db.ref(`withoutOrganization/comments/${event.orgMainId}`)\n          .push()\n          .set({\n            uid: goalReducer.currentUser.id,\n            userName: goalReducer.currentUser.name,\n            userImg: goalReducer.currentUser.url\n              ? goalReducer.currentUser.url\n              : '',\n            comment: comment,\n            goalId: event.orgMainId,\n          })\n        setComment('')\n        setCommentLoad(false)\n      }\n    }\n    // else {\n    //   alert('please enter comment')\n    // }\n  }\n\n  const scrollToBottom = () => {\n    if (postId || commentLoad) {\n      // bottomRef.current.scrollIntoView({ behavior: 'smooth' })\n    }\n  }\n\n\n  React.useEffect(scrollToBottom, [postId, commentLoad,handleAddComment])\n  \n  // delete comment\n  const handleDeleteComment = (event) => {\n    if (goalReducer.currentUser.orgId !== '') {\n      db.ref(\n        `organizations/${goalReducer.currentUser.orgId}/comments/${event.goalId}/${event.commentId}`,\n      ).remove()\n    }\n  }\n\n  const handleClosePopup = () => {\n    setReportSuccesPopup(false)\n  }\n\n  return (\n    <div className=\"feedGoalsContainer\">\n      {reportSuccesPopup ? (\n        <AlertDialog\n          handleClose={handleClosePopup}\n          open={reportSuccesPopup}\n          value=\"Reported Successfull\"\n          btnValue=\"OK\"\n        />\n      ) : null}\n      <div className=\"feedGoalsContent\">\n        <div className=\"feedGoals \">\n          {userReducer.feedGoals.length ? (\n            userReducer.feedGoals.map((val, i) => {\n              // console.log(val)\n              return (\n                <div\n                  className={\n                    i % 2 !== 0\n                      ? 'horizontal feedGoalGrid'\n                      : 'vertical feedGoalGrid'\n                  }\n                  key={i}\n                >\n                  <div className=\"imgLikeBtn\">\n                    <img\n                      className=\"feedGoalImg\"\n                      src={val.uploadImgUlr}\n                      alt=\"...\"\n                    />\n                    {userReducer.postLikes.map((like, j) => {\n                      return like.goalId === val.orgMainId &&\n                        like.uid === goalReducer.currentUser.id ? (\n                        <button\n                          className=\"likeBtn likeZ\"\n                          onClick={\n                            !like.isLike\n                              ? () => handleLikePost(val, like)\n                              : () => handleUnlikePost(like, val)\n                          }\n                          key={j}\n                        >\n                          <ThumbUpAltOutlinedIcon\n                            className={like.isLike ? 'liked' : 'unlike'}\n                          />\n                        </button>\n                      ) : null\n                    })}\n                    <button\n                      className=\"likeBtn\"\n                      onClick={() => handleLikePost(val, false)}\n                    >\n                      <ThumbUpAltOutlinedIcon className={'unlike'} />\n                    </button>\n                  </div>\n                  <div className=\"cmntAndReportBtn\">\n                    <div className=\"noOfLikes\">\n                      <p>{val.likes ? val.likes + ' Likes' : '0 Likes'}</p>\n                    </div>\n                    <button\n                      onClick={() => handleCommentShow(val)}\n                      className=\"cmntBtn\"\n                    >\n                      Comment\n                    </button>\n                    <button\n                      className={val.userIdMain===goalReducer.currentUser.id?'disabled reportBtn' :\"reportBtn\"}\n                      onClick={() => handleReportPost(val)}\n                      disabled={loading || val.userIdMain===goalReducer.currentUser.id }\n                    >\n                      {loading && reportGoalId===val.orgMainId ? 'loading...' : 'Report'}\n                    </button>\n                  </div>\n                  {val.orgMainId === postId ? (\n                    <div className=\"commentSection\">\n                      <ul className=\"commmentList\">\n                        {userReducer.comments.length ? (\n                          userReducer.comments.map((commentval, k) => {\n                            return commentval.goalId === val.orgMainId ? (\n                              <li key={k}>\n                                <img\n                                  src={\n                                    commentval.userImg ? commentval.userImg : dp\n                                  }\n                                  alt=\"...\"\n                                />\n                                <div className=\"comments\">\n                                  <div className=\"cmntLines\">\n                                    <h6>{commentval.userName}</h6>\n                                    <p>{commentval.comment}</p>\n                                  </div>\n                                  {commentval.uid ===\n                                  goalReducer.currentUser.id ? (\n                                    <button\n                                      className=\"dltBtn\"\n                                      onClick={() =>\n                                        handleDeleteComment(commentval)\n                                      }\n                                      >\n                                      <DeleteForeverIcon className=\"dltIcon\" />\n                                    </button>\n                                  ) : null}\n                                </div>\n                                  <p className=\"strtBtm\" ref={bottomRef}></p>\n                              </li>\n                            ) : null\n                          })\n                        ) : (\n                          <p>There is no comment!</p>\n                        )}\n                      </ul>\n                      <div className=\"commentInput\">\n                        <input\n                          type=\"text\"\n                          name=\"comment\"\n                          id=\"comment\"\n                          placeholder=\"Comment\"\n                          onChange={handleComment}\n                          value={comment}\n                        />\n                        <button onClick={() => handleAddComment(val)}>\n                          <SendIcon className=\"sentIcon\" />\n                        </button>\n                      </div>\n                    </div>\n                  ) : null}\n                </div>\n              )\n            })\n          ) : (\n            <p>list is empty</p>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UsersGoals\n"]},"metadata":{},"sourceType":"module"}